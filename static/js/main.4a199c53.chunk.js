(this.webpackJsonpagile_board=this.webpackJsonpagile_board||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t),n.d(t,"StoreContext",(function(){return ie}));var r=n(0),a=n.n(r),i=n(11),c=n.n(i),s=n(21),o=n(16),d=n(36),u=n(164),l=n(166),j=n(159),b=n(73),f=n(115),p=n(44),v=function(){return Object(r.useContext)(ie)},O=n(152),h=n(151),x=n(172),m=n(4),g=function(e){var t=e.user;return Object(m.jsxs)(u.a,{display:"flex",alignItems:"center",children:[Object(m.jsx)(x.a,{src:null===t||void 0===t?void 0:t.avatar,alt:null===t||void 0===t?void 0:t.name}),Object(m.jsx)("span",{style:{padding:5},children:null===t||void 0===t?void 0:t.name})]})},k=function(e){var t=e.task;return Object(m.jsxs)(h.a,{children:[Object(m.jsx)(f.a,{color:"textPrimary",gutterBottom:!0,style:{fontSize:18},children:null===t||void 0===t?void 0:t.title}),Object(m.jsx)(f.a,{color:"textSecondary",gutterBottom:!0,children:null===t||void 0===t?void 0:t.description}),Object(m.jsx)(g,{user:t.assignee})]})},y=Object(s.a)((function(e){var t,n=e.section;return Object(m.jsx)("div",{children:null===n||void 0===n||null===(t=n.tasks)||void 0===t?void 0:t.map((function(e,t){return Object(m.jsx)(p.b,{draggableId:e.id,index:t,children:function(t){return Object(m.jsx)(O.a,Object(o.a)(Object(o.a)(Object(o.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:(n=t.draggableProps.style,Object(o.a)({padding:8,marginBottom:8},n)),children:Object(m.jsx)(k,{task:e})}));var n}},e.id)}))})})),C=n(47),w=n(169),S=n(158),I=n(154),T=n(153),B=n(171),P=n(157),A=n(165),D=n(170),E=Object(s.a)((function(e){var t=e.activeSection,n=e.open,a=e.handleClose,i=Object(r.useState)({}),c=Object(d.a)(i,2),s=c[0],j=c[1],b=v(),f=b.users,p=b.boards,O=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;j((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(C.a)({},n,r?r.trim():""))}))}),[j]),h=Object(r.useCallback)((function(e){e.preventDefault(),p.active.addTask(t,s),a(),j({})}),[s,p,t,a]);return Object(m.jsxs)(w.a,{open:n,onClose:a,children:[Object(m.jsx)(T.a,{children:"Creating A New Task:"}),Object(m.jsxs)("form",{onSubmit:h,children:[Object(m.jsxs)(I.a,{style:{minWidth:500},children:[Object(m.jsx)(u.a,{p:1,children:Object(m.jsx)(D.a,{fullWidth:!0,required:!0,type:"text",name:"title",label:"Title",onChange:O,value:(null===s||void 0===s?void 0:s.title)||""})}),Object(m.jsx)(u.a,{p:1,children:Object(m.jsx)(D.a,{fullWidth:!0,required:!0,type:"description",name:"description",label:"Description",onChange:O,value:(null===s||void 0===s?void 0:s.description)||""})}),Object(m.jsx)(u.a,{p:1,children:Object(m.jsxs)(B.a,{fullWidth:!0,children:[Object(m.jsx)(P.a,{children:"Assignee"}),Object(m.jsxs)(A.a,{native:!0,name:"assignee",value:(null===s||void 0===s?void 0:s.assignee)||"",onChange:O,children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"-"}),f.list.map((function(e){return Object(m.jsx)("option",{value:e.id,children:null===e||void 0===e?void 0:e.name},e.id)}))]})]})})]}),Object(m.jsxs)(S.a,{children:[Object(m.jsx)(l.a,{onClick:a,color:"secondary",children:"Close"}),Object(m.jsx)(l.a,{type:"submit",color:"primary",children:"Create"})]})]})]})})),R=Object(s.a)((function(){var e,t,n=v().boards,a=Object(r.useState)(null),i=Object(d.a)(a,2),c=i[0],s=i[1],O=Object(r.useCallback)((function(){s(null)}),[s]),h=Object(r.useCallback)((function(e){var t=e.source,r=e.destination,a=e.draggableId;n.active.moveTask(a,t,r)}),[n]);return Object(m.jsxs)(u.a,{p:2,children:[Object(m.jsx)(p.a,{onDragEnd:h,children:Object(m.jsx)(j.a,{container:!0,spacing:3,children:null===(e=n.active)||void 0===e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsxs)(b.a,{children:[Object(m.jsxs)(u.a,{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(m.jsx)(f.a,{variant:"h5",children:null===e||void 0===e?void 0:e.title}),Object(m.jsx)(l.a,{variant:"outlined",color:"primary",onClick:function(){s(e.id)},children:"Add"})]}),Object(m.jsx)(p.c,{droppableId:e.id,children:function(t,n){return Object(m.jsxs)("div",Object(o.a)(Object(o.a)({},t.droppableProps),{},{ref:t.innerRef,style:(r=n.isDraggingOver,{backgroundColor:r?"lightblue":"lightgray",padding:8,minHeight:500}),children:[Object(m.jsx)(y,{section:e}),t.placeholder]}));var r}})]})},e.id)}))})}),Object(m.jsx)(E,{open:!!c,handleClose:O,activeSection:c})]})})),J=n(160),N=n(161),U=Object(s.a)((function(){var e,t=v(),n=t.boards,r=t.users;return Object(m.jsx)(J.a,{position:"static",children:Object(m.jsx)(N.a,{variant:"dense",children:Object(m.jsxs)(j.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(m.jsx)(j.a,{item:!0,children:Object(m.jsxs)(u.a,{display:"flex",alignItems:"center",children:[Object(m.jsx)(f.a,{variant:"h6",children:"Dashboard:"}),Object(m.jsx)(B.a,{variant:"outlined",children:Object(m.jsxs)(A.a,{style:{backgroundColor:"#ffffff",marginLeft:10},native:!0,value:(null===n||void 0===n||null===(e=n.active)||void 0===e?void 0:e.id)||"",onChange:function(e){var t=e.target.value;n.selectBoard(t)},children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"-"}),n.list.map((function(e){return Object(m.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.title},e.id)}))]})})]})}),Object(m.jsx)(j.a,{item:!0,children:Object(m.jsx)(g,{user:null===r||void 0===r?void 0:r.me})})]})})})}));var W=Object(s.a)((function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(U,{}),Object(m.jsx)("main",{children:Object(m.jsx)(R,{})})]})})),q=n(8),H=n(13),L=n.n(H),M=n(40),_=n(69),z=n(70),F=n(71),G=n.n(F),K=new(function(){function e(t){Object(_.a)(this,e),this.domain=t}return Object(z.a)(e,[{key:"perform",value:function(){var e=Object(M.a)(L.a.mark((function e(t,n,r){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.domain,"/").concat(t),Object(o.a)(Object(o.a)({},r),{},{body:JSON.stringify(n),headers:{"Content-type":"application/json"}}));case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(M.a)(L.a.mark((function e(t,n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform("".concat(t,"?").concat(G.a.stringify(n)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(M.a)(L.a.mark((function e(t,n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform(t,n,{method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(M.a)(L.a.mark((function e(t,n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform(t,n,{method:"PUT"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform(t,{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())("http://localhost:3001"),Q=q.d.model("User",{id:q.d.identifier,createdAt:q.d.string,name:q.d.string,avatar:q.d.string}),V=Q.named("ActiveUser"),X=q.d.model("UsersStore",{users:q.d.maybe(q.d.array(Q)),me:q.d.maybe(V)}).views((function(e){return{get list(){return e.users&&e.users.length>0?e.users.map((function(e){return{id:e.id,name:e.name}})):[]}}})).actions((function(e){return{load:Object(q.a)(L.a.mark((function t(){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.get("users");case 2:return e.users=t.sent,t.next=5,K.get("me");case 5:e.me=t.sent;case 6:case"end":return t.stop()}}),t)}))),afterCreate:function(){e.load()}}})),Y=n(168),Z=q.d.model("Task",{id:q.d.identifier,title:q.d.string,description:q.d.string,assignee:q.d.safeReference(Q)}),$=q.d.model("BoardSection",{id:q.d.identifier,title:q.d.string,tasks:q.d.array(Z)}).actions((function(e){return{load:Object(q.a)(L.a.mark((function t(){var n,r,a,i,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(q.b)(e,2),r=n.id,a=e.id,t.next=4,K.get("boards/".concat(r,"/tasks/").concat(a));case 4:i=t.sent,c=i.tasks,e.tasks=c,Object(q.c)(e,e.save);case 8:case"end":return t.stop()}}),t)}))),save:Object(q.a)(L.a.mark((function t(n){var r,a,i,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.tasks,a=Object(q.b)(e,2),i=a.id,c=e.id,t.next=5,K.put("boards/".concat(i,"/tasks/").concat(c),{tasks:r});case 5:case"end":return t.stop()}}),t)}))),afterCreate:function(){e.load()}}})),ee=q.d.model("Board",{id:q.d.identifier,title:q.d.string,sections:q.d.array($)}).actions((function(e){return{moveTask:function(t,n,r){var a=e.sections.find((function(e){return e.id===n.droppableId})),i=e.sections.find((function(e){return e.id===r.droppableId})),c=a.tasks.findIndex((function(e){return e.id===t})),s=a.tasks.splice(c,1),o=Object(d.a)(s,1)[0];i.tasks.splice(r.index,0,o.toJSON())},addTask:function(t,n){e.sections.find((function(e){return e.id===t})).tasks.push(Object(o.a)({id:Object(Y.a)()},n))}}})),te=q.d.model("BoardStore",{boards:q.d.optional(q.d.array(ee),[]),active:q.d.safeReference(ee)}).views((function(e){return{get list(){return e.boards.map((function(e){return{id:e.id,title:e.title}}))}}})).actions((function(e){return{selectBoard:function(t){e.active=t},load:Object(q.a)(L.a.mark((function t(){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.get("boards");case 2:e.boards=t.sent,e.active="MAIN";case 4:case"end":return t.stop()}}),t)}))),afterCreate:function(){e.load()}}})),ne=q.d.model("RootStore",{users:q.d.optional(X,{}),boards:q.d.optional(te,{})}),re=n(162),ae=ne.create({}),ie=Object(r.createContext)(ae);c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsxs)(ie.Provider,{value:ae,children:[Object(m.jsx)(re.a,{}),Object(m.jsx)(W,{})]})}),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.4a199c53.chunk.js.map